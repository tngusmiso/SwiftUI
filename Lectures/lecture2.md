
# Lecture 2 :: MVVM and the Swift Type System

[![Stanford SwiftUI 2020](http://img.youtube.com/vi/4GjXq2Sr55Q/0.jpg)](https://www.youtube.com/watch?v=4GjXq2Sr55Q)

<br/>

---
## ğŸ MVVM
* SwiftUIì—ì„œ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´
* ê³¼ê±° UIKitì—ì„œëŠ” MVCë¥¼ ë§ì´ ì‚¬ìš©í–ˆë‹¤.

![image1](./img2/image1.png)

### Model
* UI ë…ë¦½ì  : SwiftUIë¥¼ import í•˜ì§€ ì•ŠëŠ”ë‹¤.
* ë°ì´í„°ì™€ ë¡œì§ì„ ìº¡ìŠí™”í•œë‹¤.

### View
* ëª¨ë¸ì„ ë°˜ì˜ : View ìì²´ì—ì„œëŠ” ìƒíƒœë¥¼ ê°€ì§€ì§€ ì•Šìœ¼ë©°, ëª¨ë¸ì˜ ìƒíƒœë¥¼ ë°˜ì˜í•œë‹¤.
* ë°ì´í„°ì˜ íë¦„ : (ëª¨ë¸ -> ë·°) ë·°ëŠ” ëª¨ë¸ì„ ì½ì–´ì˜¤ê¸°ë§Œ í•˜ê³ , ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.
* ì„ ì–¸ì  : ê°„ê²°í•œ ì½”ë“œë¡œ ì„ ì–¸ë˜ì–´ ìˆì„ ë¿!
* ë°˜ì‘ì  : ëª¨ë¸ì´ ë³€ê²½ë  ë•Œ ë§ˆë‹¤ ë°˜ì‘í•˜ì—¬ ë·°ê°€ ìë™ìœ¼ë¡œ ê°±ì‹ ëœë‹¤.

### ViewModel
* ë·°ë¥¼ ëª¨ë¸ì— ë°”ì¸ë”© í•˜ëŠ” ì—­í• 
* ëª¨ë¸ì— ëŒ€í•œ ëª¨ë“ ê²ƒì„ ì•Œê³  ìˆë‹¤. ë·°ì— ëŒ€í•´ì„œëŠ” ì•Œì§€ ëª»í•œë‹¤.
* **ëª¨ë¸ì˜ ë³€í™”ë¥¼ ì•Œì•„ì±”** -> **ëª¨ë¸ì„ ë·°ì˜ ì–¸ì–´ë¡œ í•´ì„** -> **ë·° ê°±ì‹ (ì§ì ‘ ëŒ€í™” X)**
    - ë·°ëª¨ë¸ì€ ëª¨ë¸ì„ ì•Œê³  ìˆë‹¤. ëª¨ë¸ì˜ ë³€ê²½ì‚¬í•­ì´ ë°œìƒí•˜ë©´ ë·°ëª¨ë¸ì´ ì•Œì•„ì±ˆë‹¤.
    - ë·°ê°€ ì‚¬ìš©í•˜ê¸° ì¢‹ë„ë¡ ëª¨ë¸ì„ í•´ì„í•œë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œ Modelì€ ë‹¨ìˆœíˆ êµ¬ì¡°ì²´(struct)ì´ì§€ë§Œ, ë°ì´í„°ë² ì´ìŠ¤ë‚˜ Httpí†µì‹ ì˜ ìš”ì²­ ê²°ê³¼ê°’ì´ ë  ìˆ˜ë„ ìˆë‹¤. ë³µì¡í•œ ëª¨ë¸ì„ ë‹¨ìˆœí™”í•˜ì—¬ ë·°ê°€ í•„ìš”í•œ ì •ë³´ë§Œ ë½‘ì•„ë‚´ëŠ” ê²ƒì´ë‹¤.
    - ë·°ëª¨ë¸ì„ ë·°ë¥¼ ëª¨ë¥¸ë‹¤. ë·°ëŠ” ë·°ëª¨ë¸ì„ êµ¬ë…í•˜ì—¬, ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œ ë§ˆë‹¤ ë·°ëª¨ë¸ì—ê²Œ ë¬¼ì–´ë´ì„œ ìì‹ ì„ ë³€ê²½í•œë‹¤.
* **Intent ì²˜ë¦¬** -> **ëª¨ë¸ ë³€ê²½**
    - ë·°ì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ë·°ëª¨ë¸ì˜ Intent í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
    - ëª¨ë¸ì„ ì˜ë„ëŒ€ë¡œ ë³€ê²½í•œë‹¤. ëª¨ë¸ì´ structë¼ë©´ í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì¼ ìˆ˜ë„ ìˆê³ , ë°ì´í„°ë² ì´ìŠ¤ë¼ë©´ SQLë¬¸ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒì¼ìˆ˜ë„ ìˆë‹¤. 
* ì´ëŸ¬í•œ ì–‘ ë°©í–¥ì˜ íë¦„ì€ ëŠì„ì—†ì´ ë°˜ë³µëœë‹¤. (M->VM->V -> V->VM->M)

<br/>

--- 
## ğŸ Struct vs Class

### ê³µí†µì 
- `let` ë˜ëŠ” `var`ë¡œ ì„ ì–¸ëœ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ”ë‹¤.
- í•¨ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤.
- init(ìƒì„±ì)ë¥¼ ê°–ëŠ”ë‹¤. : í´ë˜ìŠ¤ ë˜ëŠ” êµ¬ì¡°ì²´ì˜ ìƒíƒœë¥¼ ì´ˆê¸°í™” í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§í•œë‹¤.

### ì°¨ì´ì 
**Struct(êµ¬ì¡°ì²´)**
- **value type** : ê°’ì˜ ë³µì‚¬ë³¸ì„ ì „ë‹¬í•¨
- **functional programming** : í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°
- ìƒì† ë¶ˆê°€ëŠ¥
- ëª¨ë“  ë³€ìˆ˜ì— ëŒ€í•´ ì´ˆê¸°ê°’ì„ ì§€ì •í•  í•„ìš”ëŠ” ì—†ë‹¤. **(initalizer ììœ )**
- **mutable** í•œ ê°’ì€ **ëª…ì‹œ**í•´ì•¼ í•œë‹¤.
- **ëŒ€ë¶€ë¶„ì˜ ë°ì´í„° êµ¬ì¡°**ëŠ” êµ¬ì¡°ì²´ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.

**Class(í´ë˜ìŠ¤)**
- **reference type** : í™ ì˜ì—­ì— ì €ì¥ë˜ê³ , í¬ì¸í„°ì— ì˜í•´ ì „ë‹¬ë¨
- **ARC** : ìë™ ë ˆí¼ëŸ°ìŠ¤(ì°¸ì¡°) ì¹´ìš´íŒ…
- **object-oriented programming** : ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°
- ìƒì† ê°€ëŠ¥
- ë³€ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆë‹¤ë©´ ë°˜ë“œì‹œ ì´ˆê¸°í™”í•´ì£¼ì–´ì•¼ í•œë‹¤. **(initalizer í•„ìˆ˜)**
- í•­ìƒ mutable í•˜ë‹¤. (ë³€ê²½ ê°€ëŠ¥í•œ ê°’ì´ë‹¤.)
- íŠ¹ìˆ˜í•œ ê¸°ëŠ¥ìœ¼ë¡œ ì‚¬ìš©
- SwiftUIì˜ MVVM íŒ¨í„´ì—ì„œ **ViewModel**ì€ ë°˜ë“œì‹œ **í´ë˜ìŠ¤**ë‹¤ (ë§ì€ Viewë“¤ì—ê²Œ ê³µìœ ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸!)


> SwiftUIì˜ ViewëŠ” í´ë˜ìŠ¤ë„, êµ¬ì¡°ì²´ë„ ì•„ë‹Œ protocolì´ë‹¤.

<br/>

---
## ğŸ Generics
* íƒ€ì…ì„ ì‹ ê²½ì“°ê³  ì‹¶ì§€ ì•Šì§€ë§Œ, Swiftì—ì„œëŠ” Typeì´ ì¤‘ìš”í•˜ë‹¤.
* Arrayì˜ ê²½ìš° ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ë§Œ, ê·¸ ë°ì´í„°ì˜ íƒ€ì…ì€ Intê°€ ë  ìˆ˜ë„ ìˆê³ , Stringì´ ë ìˆ˜ë„ ìˆë‹¤. 
* Arrayì— ë“¤ì–´ê°€ëŠ” ë³€ìˆ˜, í•¨ìˆ˜ì˜ ë°˜í™˜í˜•ì„ ì‹ ê²½ì“°ì§€ ì•Šê³  ì§€ì •í•˜ëŠ” ë°©ë²•ì´ ì œë„¤ë¦­ì´ë‹¤.

### ì •ì˜í•˜ê¸°
* êº¾ì‡  ê´„í˜¸ ì•ˆì— ì„ì˜ì˜ íƒ€ì…ì„ ë§Œë“¤ì–´ì¤€ë‹¤. (placeholder ê°™ì€ ì—­í• )
    ```
    struct Array<Element> {
        ...
        func append(_ element: Element) 
    }
    ```

### ì„ ì–¸ ë° ì‚¬ìš©í•˜ê¸°
* êº¾ì‡  ì•ˆì˜ íƒ€ì…ì´ ì •í•´ì§€ë©´, ë”°ë¼ì˜¤ëŠ” ëª¨ë“  ë°˜í™˜í˜•ì´ í•´ë‹¹ íƒ€ì…ì²˜ëŸ¼ ì·¨ê¸‰ëœë‹¤.
* Int í˜• ë°°ì—´ì„ ì„ ì–¸í•˜ë ¤ë©´ êº¾ì‡  ì•ˆì— `ÃŒnt`ë¥¼ ì‘ì„±í•œë‹¤. ëª¨ë“  `Element`ê°€ `Int`ë¡œ ì·¨ê¸‰ëœë‹¤.
    ```
    var a = Array<Int>()
    ```
* `a`ëŠ” Intí˜• ë°°ì—´ë¡œ ì •í•´ì¡Œìœ¼ë¯€ë¡œ, `append(_:)`ì˜ ì¸ìë¡œ **Intí˜• ë°ì´í„°**ë§Œ ì˜¬ ìˆ˜ ìˆë‹¤.
    ```
    a.append(5)
    ```

<br/>

---
## ğŸ Functions as Types
* ë³€ìˆ˜ì˜ íƒ€ì…ì„ í•¨ìˆ˜ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.  
* **ì‚¬ìš©ë²•** : (íŒŒë¼ë¯¸í„°ë¡œ ë“¤ì–´ì˜¬ íƒ€ì…ë“¤) -> ë°˜í™˜ íƒ€ì…
> (Int, Int) -> Bool  // íŒŒë¼ë¯¸í„°ëŠ” Intí˜• 2ê°œ, ë°˜í™˜í˜•ì€ Bool  
> (Double) -> Void    // íŒŒë¼ë¯¸í„°ëŠ” Doubleí˜• 1ê°œ, ë°˜í™˜í˜•ì€ ì—†ìŒ  
> () -> Array<String> // íŒŒë¼ë¯¸í„° ì—†ìŒ, ë°˜í™˜í˜•ì€ String ë°°ì—´  
> () -> Void          // íŒŒë¼ë¯¸í„° ì—†ìŒ, ë°˜í™˜í˜• ì—†ìŒ  

<br/>

### ì˜ˆì‹œ
```
func sum(_ op1: Int, _ op2: Int) -> Int {
    return op1 + op2
}
func sub(_ op1: Int, _ op2: Int) -> Int {
    return op1 - op2
}
```
```
var operation: (Int, Int) -> Int    // operationì€ Int,Intí˜• íŒŒë¼ë¯¸í„°ì™€ Intë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ” ëª¨ë‘ ëŒ€ì… ê°€ëŠ¥í•˜ë‹¤.

operation = sum
let result1 = operation(1,2)    // result1 = 3

operation = sub
let result2 = operation(5,1)    // result2 = 4
```

<br/>

---
## ğŸ Closure
- ë‹¤ë¥¸ ì–¸ì–´ì˜ ëŒë‹¤ì™€ ë¹„ìŠ·í•œ ì‹
- ì¸ë¼ì¸ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” í•¨ìˆ˜ (í•¨ìˆ˜ë„ í´ë¡œì €ì˜ ì¼ì¢…ì´ë‹¤.)
- ìƒìˆ˜ì™€ ë³€ìˆ˜ì˜ referenceë¥¼ ìº¡ì³í•´ ì €ì¥í•  ìˆ˜ ìˆë‹¤.

1. **ì „ì—­í•¨ìˆ˜**: ì´ë¦„ì´ ìˆê³  ì–´ë–¤ ê°’ë„ ìº¡ì³í•˜ì§€ ì•ŠëŠ” í´ë¡œì €
2. **ì¤‘ì²©í•¨ìˆ˜**: ì´ë¦„ì´ ìˆê³  ê´€ë ¨í•œ í•¨ìˆ˜ë¡œ ë¶€í„° ê°’ì„ ìº¡ì³ í•  ìˆ˜ ìˆëŠ” í´ë¡œì €
3. ê²½ëŸ‰í™” ëœ ë¬¸ë²•ìœ¼ë¡œ ì“°ì—¬ì§€ê³  ê´€ë ¨ëœ ë¬¸ë§¥ìœ¼ë¡œë¶€í„° ê°’ì„ ìº¡ì³í•  ìˆ˜ ìˆëŠ” **ì´ë¦„ì´ ì—†ëŠ” í´ë¡œì €**


```
func loadPicture(from server: Server, completion: (Picture) -> Void, onFailure:() -> Void) {
    if let picture = download("photo.jpg",from: server) {
        completion(picture)
    } else {
        onFailure()
    }
}
```
```
loadPicture(from: someServer) { picture in
    someView.currentPicture = picture
} onFailure: {
    print("Couldn't download the next picture")
}
```

